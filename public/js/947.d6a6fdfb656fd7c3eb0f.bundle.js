"use strict";(self.webpackChunkcodersouth=self.webpackChunkcodersouth||[]).push([[947],{8947:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var a,n,l=r(9526),o=r(6481),s=r(2166),u=r(9949),i=r(5547),c=r(3016),d=r(8245),m=r(2480),g=r(8539),p=r(9291),b=r(5615),f=r(1391),h=r(8570),E=r(9083);(n=a||(a={})).key="questions",n.path="questions/";const y=e=>Object.entries(e.val()).map((([e,t])=>({user:t.user,question:t.question,date:t.date,id:e}))).sort(((e,t)=>e.date>t.date?1:-1)),w=()=>{const{data:e,refetch:t}=(0,b.useQuery)(a.key,(async()=>{const e=await(0,f.U2)((0,f.iH)(E.db,a.path));return y(e)}));return(0,l.useEffect)((()=>{var e;e=()=>t(),(0,f.jM)((0,f.iH)(E.db,a.path),(t=>t.val()?e(y(t)):[]))}),[t]),{questions:null!=e?e:[],makeQuestion:e=>(e=>(0,f.t8)((0,f.iH)(E.db,`${a.path}${(0,h.Z)()}`),e))(e)}};var k=r(9804),v=Object.defineProperty,x=Object.defineProperties,q=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,P=(e,t,r)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const S=()=>{const{user:e}=(0,k.a)(),[t,r]=(0,l.useState)(),{questions:a}=w(),n=(0,l.useMemo)((()=>t?a.filter((e=>e.user===t)):a),[t,a]),{handleSubmit:b,register:f}=(0,p.cI)(),{makeQuestion:h}=w(),E=(0,l.useCallback)((async({question:t})=>{await h({question:t,user:null==e?void 0:e.email,date:Date.now()})}),[h,e]);return l.createElement(o.gC,{alignItems:"flex-start",justifyContent:"stretch",spacing:8,width:"full"},l.createElement(s.X,null,"Preguntas"),l.createElement(u.x,null,"Hacer una pregunta:"),l.createElement(o.gC,{alignItems:"flex-start",background:"grey.300",borderRadius:"2xl",boxShadow:"2xl",padding:"2rem 1.5rem",width:"full"},l.createElement("form",{onSubmit:b(E),style:{width:"100%"}},l.createElement(i.g,(y=((e,t)=>{for(var r in t||(t={}))j.call(t,r)&&P(e,r,t[r]);if(O)for(var r of O(t))C.call(t,r)&&P(e,r,t[r]);return e})({},f("question")),x(y,q({background:"teal.100",marginBottom:6,placeholder:"Pregunta",resize:"none",w:"full"})))),l.createElement(c.z,{type:"submit"},"Preguntar"))),l.createElement(u.x,null,t?"Mostrando solo mis preguntas":"Mostrando todas las preguntas"),l.createElement(o.Ug,null,l.createElement(c.z,{onClick:()=>r(void 0)},"Ver todas las preguntas"),l.createElement(c.z,{onClick:()=>r(null==e?void 0:e.email),variant:"ghost"},"Ver mis preguntas")),0===n.length&&t&&l.createElement(u.x,{color:"red.400",fontWeight:"extrabold"},"Todavia no preguntaste nada"),n.map((({user:e,id:t,question:r})=>l.createElement(d.k,{bg:"white",borderRadius:"2xl",boxShadow:"lg",key:t,padding:"1rem 1.2rem",width:"full"},l.createElement(m.qE,{name:null!=e?e:void 0}),l.createElement(g.xu,{ml:"3"},l.createElement(u.x,{fontWeight:"bold"},e),l.createElement(u.x,{fontSize:"sm"},r))))));var y}}}]);
//# sourceMappingURL=947.d6a6fdfb656fd7c3eb0f.bundle.js.map